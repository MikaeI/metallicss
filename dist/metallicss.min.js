const base=[tag("rect",{props:{fill:"url(#gradient)",height:1024,width:1024,x:0,y:0}}),tag("rect",{props:{filter:"url(#texture)",height:1024,style:"mix-blend-mode: luminosity; opacity: 0.5",width:1024,x:0,y:0}}),tag("rect",{props:{filter:"url(#texture)",height:1024,style:"mix-blend-mode: screen; opacity: 0.25",width:1024,x:0,y:0}})],defs=tag("defs",{inner:[tag("linearGradient",{inner:[tag("stop",{props:{offset:"35%","stop-color":"#b0b0b0"}}),tag("stop",{props:{offset:"40%","stop-color":"#efefef"}}),tag("stop",{props:{offset:"45%","stop-color":"#909090"}}),tag("stop",{props:{offset:"49%","stop-color":"#707070"}}),tag("stop",{props:{offset:"51%","stop-color":"#303030"}}),tag("stop",{props:{offset:"60%","stop-color":"#909090"}}),tag("stop",{props:{offset:"70%","stop-color":"#505050"}}),tag("stop",{props:{offset:"100%","stop-color":"#505050"}})],props:{id:"gradient",x1:0,x2:0,y1:0,y2:1}})]}),serializer=new XMLSerializer,xmlns="http://www.w3.org/2000/svg";let blocked=-1!==document.body.className.indexOf("block-metallicss")||document.body.querySelectorAll(".block-metallicss").length>0;function tag(e,{inner:t,props:r}){const o=document.createElementNS("http://www.w3.org/2000/svg",e);return r&&Object.entries(r).forEach((e=>o.setAttribute(...e))),t?.forEach((e=>o.append(e))),o}function sheen({offset:e,radii:{x:t,y:r},stroke:o,vertical:s,x:i,y:l}){const a=e/(s?i:l)/2,n=e/3/(s?i:l),p=1024-2*a+2*n;return tag("rect",{props:{"stroke-width":n,fill:"none",height:s?1024+n:p,rx:t,ry:r,stroke:o,width:s?p:1024+n,x:s?a-n:-n/2,y:s?-n/2:a-n}})}function rasterify(e){return new Promise((function(t){const r=window.URL||window.webkitURL||window,o=document.createElement("canvas");let s,i,l;o.width=512,o.height=512,s=o.getContext("2d"),i=r.createObjectURL(new Blob([e],{type:"image/svg+xml;charset=utf-8"})),l=new Image,l.onload=function(){s.drawImage(this,0,0),r.revokeObjectURL(i),t(o.toDataURL())},l.src=i}))}export const block=()=>{blocked=!0},unblock=()=>{blocked=!1},metallicss=e=>{const{offsetWidth:t,offsetHeight:r}=e,{backgroundColor:o,borderRadius:s}=getComputedStyle(e),i=getComputedStyle(e).getPropertyValue("--convexity"),l=getComputedStyle(e).getPropertyValue("--seed")||23,a=getComputedStyle(e).getPropertyValue("--scale")||4,n=getComputedStyle(e).getPropertyValue("--metal").replace(/ /g,""),p="0%"===i||" 0%"===i?0:i&&parseInt(i)||20,c=p*((r>t?t:r)/640),g=Math.abs(c),f=t/(16*a*(g/10+1)),d=r/(16*a*(g/10+1)),u=parseInt(s),h={x:r/2<u?d/f*512:u*(1024/t),y:t/2<u?f/d*512:u*(1024/r)},y=c<0,m=("gold"===n?"rgb(255, 215, 128)":"copper"===n?"rgb(187, 128, 119)":"silver"===n?"rgb(221, 231, 247)":"lead"===n?"rgb(55, 55, 64)":"rgba(0, 0, 0, 0)"===o?"rgb(128, 128, 128)":o).replace("rgb(","").replace(")","").replace(/ /g,"").split(",").map((e=>(parseInt(e)/256).toFixed(3))),b=`${m[0]} 0 0 0 0 0 ${m[1]} 0 0 0 0 0 ${m[2]} 0 0 0 0 0 1 0`;rasterify(serializer.serializeToString(tag("svg",{inner:[tag("filter",{inner:[tag("feImage",{props:{"color-interpolation-filters":"sRGB",preserveAspectRatio:"none",height:1024,width:1024,href:`data:image/svg+xml;utf8,${encodeURIComponent(serializer.serializeToString(tag("svg",{props:{height:2048,width:2048,xmlns:xmlns},inner:[tag("rect",{props:{fill:"white",height:2048,width:2048}}),tag("g",{inner:Array.from({length:24}).map(((e,t)=>sheen({offset:Math.pow(3,t%2==0?t/4:(t-1)/4),radii:h,stroke:Math.ceil(t/2)%2==0?"red":"white",vertical:t%2==0,x:f,y:d}))).reverse(),props:{transform:"translate(512,512)"}})]})))}`,result:"image"}}),tag("feGaussianBlur",{props:{"color-interpolation-filters":"sRGB",in:"image",result:"blur",stdDeviation:`${a*(d/f)||0},${1.5*a*(f/d)||0}`}}),tag("feDisplacementMap",{props:{"color-interpolation-filters":"sRGB",in:"SourceGraphic",in2:"blur",result:"displacement",scale:50+Math.abs(p)>100?100:50+Math.abs(p),xChannelSelector:"R",yChannelSelector:"G"}})],props:{filterUnits:"userSpaceOnUse",height:2048,id:"noise",width:2048,x:0,y:0}}),tag("filter",{inner:[tag("feTurbulence",{props:{"color-interpolation-filters":"sRGB",baseFrequency:.005,result:"turbulence",seed:l,type:"fractalNoise"}}),tag("feDisplacementMap",{props:{"color-interpolation-filters":"sRGB",in2:"turbulence"}})],props:{filterUnits:"userSpaceOnUse",height:1024,id:"texture",width:1024,x:0,y:0}}),tag("filter",{inner:[tag("feTurbulence",{props:{"color-interpolation-filters":"sRGB",baseFrequency:"0.0025,0.005",numOctaves:3,type:"fractalNoise",stitchTiles:"stitch",result:"grain",seed:l}}),tag("feDisplacementMap",{props:{"color-interpolation-filters":"sRGB",in:"SourceGraphic",in2:"grain",scale:5}})],props:{id:"grain"}}),tag("filter",{inner:[tag("feColorMatrix",{props:{"color-interpolation-filters":"sRGB",in:"SourceGraphic",type:"matrix",values:b,result:"color"}}),tag("feComponentTransfer",{props:{"color-interpolation-filters":"sRGB",in:"color",result:"brightness"},inner:[tag("feFuncR",{props:{type:"linear",slope:"2"}}),tag("feFuncG",{props:{type:"linear",slope:"2"}}),tag("feFuncB",{props:{type:"linear",slope:"2"}})]}),tag("feBlend",{props:{"color-interpolation-filters":"sRGB",mode:"color",in:"color",in2:"SourceGraphic",result:"colorized"}}),tag("feBlend",{props:{"color-interpolation-filters":"sRGB",mode:"soft-light",in:"brightness",in2:"colorized"}})],props:{id:"lustre"}}),defs,tag("radialGradient",{inner:[tag("stop",{props:{offset:"33%","stop-color":"black","stop-opacity":y?.25:0}}),tag("stop",{props:{offset:"67%","stop-color":"black","stop-opacity":y?.5:.25}})],props:{id:"radial"}}),tag("g",{inner:[tag("g",{inner:[tag("g",{inner:base,props:{filter:"url(#noise)"}}),tag("rect",{props:{fill:"url(#radial)",height:1024,width:1024,x:0,y:0}})],props:{filter:"url(#grain)"}})],props:{filter:"url(#lustre)"}})],props:{preserveAspectRatio:"none",style:`transform: scale(1, ${y?"-":""}1)`,viewBox:"256 256 512 512",xmlns:xmlns}}))).then((t=>e.style.backgroundImage=t)),e.style.backgroundSize="100% 100%",e.style.border="none",e.style.boxShadow=y?"":"#00000030 1px 2px 2px, #00000020 2px 4px 4px",e.style.color="#"+(y||r>100?`${{copper:"100000",gold:"302000",neutral:"000000",silver:"001010",lead:"000000"}[n||"neutral"]}c0`:"ffffffe0"),e.style.textRendering="geometricPrecision",e.style.textShadow=y||r>100?"white .5px .5px 1px":"black -.5px -.5px 1px",e.style.transform="translateZ(0)",e.style.transition="none"},traverse=()=>!blocked&&Array.from(document.querySelectorAll(".metallicss")).filter((e=>"none"!=window.getComputedStyle(e).getPropertyValue("display"))).forEach(metallicss);"loading"!==document.readyState?traverse():document.addEventListener("DOMContentLoaded",traverse);export default metallicss;
