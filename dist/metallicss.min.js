const serializer=new XMLSerializer,xmlns="http://www.w3.org/2000/svg",domUrl=window.URL||window.webkitURL||window,isFirefox=window.navigator.userAgent.indexOf("Firefox")>-1,dims={height:2048,width:2048},sRGB={"color-interpolation-filters":"sRGB"},randomSeed=Math.floor(100*Math.random()),gradients=[tag("radialGradient",{inner:[tag("stop",{props:{"stop-color":"#c0c0d0",offset:0}}),tag("stop",{props:{"stop-color":"#606070",offset:1}})],props:{"color-interpolation":"sRGB",cx:.6,cy:1,id:"n"}}),tag("radialGradient",{inner:[tag("stop",{props:{"stop-color":"#404040",offset:0}}),tag("stop",{props:{"stop-color":"white",offset:1}})],props:{"color-interpolation":"sRGB",cx:.6,cy:0,id:"s"}})],map=tag("feImage",{props:{...dims,...sRGB,href:`data:image/svg+xml;charset=utf-8,${encodeURIComponent(serializer.serializeToString(tag("svg",{inner:[tag("linearGradient",{inner:[tag("stop",{props:{"stop-color":"#ff0000","stop-opacity":1,offset:0}}),tag("stop",{props:{"stop-color":"#ff0000","stop-opacity":0,offset:1}})],props:{"color-interpolation":"sRGB",id:"red",x1:0,x2:1,y1:0,y2:0}}),tag("linearGradient",{inner:[tag("stop",{props:{"stop-color":"#0000ff","stop-opacity":1,offset:0}}),tag("stop",{props:{"stop-color":"#0000ff","stop-opacity":0,offset:1}})],props:{"color-interpolation":"sRGB",id:"blue",x1:0,x2:0,y1:0,y2:1}}),tag("rect",{props:{fill:"black",height:"100%",width:"100%"}}),tag("rect",{props:{fill:"url(#red)",height:"100%",width:"100%"}}),tag("rect",{props:{fill:"url(#blue)",height:"100%",width:"100%",style:"mix-blend-mode: screen"}})],props:{...dims,xmlns:xmlns}})))}`,preserveAspectRatio:"none",result:"map"}});function tag(e,{inner:t,props:r}){const o=document.createElementNS("http://www.w3.org/2000/svg",e);return r&&Object.entries(r).forEach((e=>o.setAttribute(...e))),t?.forEach((e=>o.append(e))),o}export const metallicss=e=>{const{offsetHeight:t,offsetWidth:r}=e,{backgroundColor:o,borderRadius:s}=getComputedStyle(e),i=getComputedStyle(e).getPropertyValue("--convexity"),a=getComputedStyle(e).getPropertyValue("--seed")||randomSeed,p=getComputedStyle(e).getPropertyValue("--metal").replace(/ /g,""),l="0"===i||" 0"===i?0:i&&parseInt(i)||4,n=Math.abs(l),c=parseInt(s),g=l<0,d="gold"===p?"rgb(255, 255, 0)":"copper"===p?"rgb(255, 128, 0)":"silver"===p?"rgb(255, 255, 255)":"lead"===p?"rgb(0, 0, 0)":"rgba(0, 0, 0, 0)"===o?"rgb(128, 128, 128)":o,f=e.querySelector(":scope > .metal")||document.createElement("canvas"),m=f.getContext("2d",{alpha:!1}),h=[tag("rect",{props:{fill:"url(#n)",height:1200,width:2048}}),tag("rect",{props:{fill:"url(#s)",height:848,width:2048,y:1200}}),tag("rect",{props:{...dims,fill:d,style:"mix-blend-mode: color",opacity:.25}}),tag("rect",{props:{...dims,filter:"url(#perlin)"}})];let u,x,y=parseInt((t/2<c?t/r*1024:c*(2048/r))/4)-4*n,w=parseInt((r/2<c?r/t*1024:c*(2048/t))/4)-4*n;0!==r&&0!==t&&(y<0&&(y=0),w<0&&(w=0),u=new Image,u.onload=function(){f.height=isFirefox?512:2*t>1024?1024:2*t,f.width=isFirefox?512:2*r>1024?1024:2*r,setTimeout((()=>{m.drawImage(this,0,0),domUrl.revokeObjectURL(x),u.remove()}),0)},null===e.querySelector(":scope > .metal")&&(f.className="metal",e.append(f)),x=domUrl.createObjectURL(new Blob([serializer.serializeToString(tag("svg",{inner:[...gradients,tag("filter",{inner:[map,tag("feImage",{props:{...dims,...sRGB,href:`data:image/svg+xml;charset=utf-8,${encodeURIComponent(serializer.serializeToString(tag("svg",{inner:[tag("filter",{inner:[tag("feGaussianBlur",{props:{...sRGB,stdDeviation:3*n}})],props:{id:"blur"}}),tag("rect",{props:{fill:"rgb(1, 0, 1)",filter:"url(#blur)",height:25-n/3*((r+t)/2/t)+"%",width:25-n/3*((r+t)/2/r)+"%",rx:y,ry:w,x:37.5+n/6*((r+t)/2/r)+"%",y:37.5+n/6*((r+t)/2/t)+"%"}})],props:{...dims,xmlns:xmlns}})))}`,preserveAspectRatio:"none",result:"lens"}}),tag("feBlend",{props:{...sRGB,in:"lens",in2:"map"}}),tag("feDisplacementMap",{props:{...sRGB,in:"SourceGraphic",scale:-500,xChannelSelector:"R",yChannelSelector:"B"}}),tag("feComponentTransfer",{inner:"RGB".split("").map((e=>tag(`feFunc${e}`,{props:{type:"linear",slope:"2",intercept:-.5}}))),props:sRGB}),tag("feComponentTransfer",{inner:"RGB".split("").map((e=>tag(`feFunc${e}`,{props:{type:"linear",slope:1.1}}))),props:sRGB}),tag("feColorMatrix",{props:{...sRGB,type:"saturate",values:1.5}})],props:{id:"warp",x:0,y:0}}),tag("filter",{inner:[tag("feTurbulence",{props:{...sRGB,baseFrequency:"0.005 0.01",seed:a,type:"fractalNoise"}}),tag("feColorMatrix",{props:{...sRGB,type:"saturate",values:.1}})],props:{id:"perlin"}}),tag("g",{inner:g?[...h,tag("rect",{props:{...dims,fill:"#30303030"}})]:h,props:{filter:"url(#warp)"}}),tag("rect",{props:{...dims,fill:d,style:"mix-blend-mode: soft-light",opacity:.25}})],props:{height:isFirefox?512:2*t>1024?1024:2*t,width:isFirefox?512:2*r>1024?1024:2*r,preserveAspectRatio:"none",style:`transform: scale(1, ${g?"-":""}1)`,viewBox:"768 768 512 512",xmlns:xmlns}}))],{type:"image/svg+xml;charset=utf-8"})),u.src=x,e.style.boxShadow=g?"":"#00000030 1px 2px 2px, #00000020 2px 4px 4px",e.style.color="white",e.style.overflow="hidden",e.style.textRendering="geometricPrecision",e.style.transform="translateZ(0)",Object.assign(e.querySelector(":scope > .metal").style,{height:"100%",left:"0",maxWidth:"100%",position:"absolute",top:"0",width:"100%",zIndex:-1}))},traverse=()=>Array.from(document.querySelectorAll(".metallicss")).forEach(window.metallicss);window.metallicss=metallicss,window.addEventListener("load",traverse);export default metallicss;
