const base=[tag("rect",{props:{fill:"url(#gradient)",height:1024,width:1024,x:0,y:0}})],serializer=new XMLSerializer,xmlns="http://www.w3.org/2000/svg",domUrl=window.URL||window.webkitURL||window;function tag(t,{inner:e,props:r}){const o=document.createElementNS("http://www.w3.org/2000/svg",t);return r&&Object.entries(r).forEach((t=>o.setAttribute(...t))),e?.forEach((t=>o.append(t))),o}function sheen({offset:t,radii:{x:e,y:r},stroke:o,vertical:s,x:a,y:l}){const i=t/(s?a:l)/2,p=t/3/(s?a:l),n=1024-2*i+2*p;return tag("rect",{props:{"stroke-width":parseInt(p),fill:"none",height:parseInt(s?1024+p:n),rx:parseInt(e),ry:parseInt(r),stroke:o,width:parseInt(s?n:1024+p),x:parseInt(s?i-p:-p/2),y:parseInt(s?-p/2:i-p)}})}function angleToPoints(t){const e=(.5*(Math.floor(t/Math.PI*2)+2)+1/4)*Math.PI,r=Math.cos(Math.abs(e-t))*Math.sqrt(2),o=r*Math.cos(t),s=r*Math.sin(t);return{x1:o<0?1:0,y1:s<0?1:0,x2:o>=0?o:o+1,y2:s>=0?s:s+1}}function toRadians(t){return t/180*Math.PI}function rasterify(t,e,r){const o=domUrl.createObjectURL(new Blob([e],{type:"image/svg+xml;charset=utf-8"})),s=r?new Image:t.querySelector(":scope > .metal");r&&(s.onload=function(){const t=document.createElement("canvas"),e=t.getContext("2d",{alpha:!1});t.width=1024,t.height=1024,e.drawImage(this,0,0),domUrl.revokeObjectURL(o),s.remove(),r(t.toDataURL()),t.remove()}),s.src=o}export const metallicss=t=>{const{offsetWidth:e,offsetHeight:r}=t,{backgroundColor:o,borderRadius:s}=getComputedStyle(t),a=getComputedStyle(t).getPropertyValue("--convexity"),l=getComputedStyle(t).getPropertyValue("--scale")||4,i=getComputedStyle(t).getPropertyValue("--metal").replace(/ /g,""),p="0%"===a||" 0%"===a?0:a&&parseInt(a)||20,n=p*((r>e?e:r)/640),c=Math.abs(n),g=e/(16*l*(c/10+1)),f=r/(16*l*(c/10+1)),d=parseInt(s),h={x:r/2<d?f/g*512:d*(1024/e),y:e/2<d?g/f*512:d*(1024/r)},y=n<0,u={2:-67.5,1:-78.75,0:-90,"-0":-90,"-1":-101.25,"-2":-112.5}[y?-1*parseInt(getComputedStyle(t).getPropertyValue("--rotation")||"0"):getComputedStyle(t).getPropertyValue("--rotation")||"0"]||-90,m="gold"===i?"rgb(255, 215, 128)":"copper"===i?"rgb(187, 128, 119)":"silver"===i?"rgb(221, 231, 247)":"lead"===i?"rgb(55, 55, 64)":"rgba(0, 0, 0, 0)"===o?"rgb(128, 128, 128)":o,x=m.replace("rgb(","").replace(")","").replace(/ /g,"").split(",").map((t=>(parseInt(t)/256).toFixed(3))),w=angleToPoints(toRadians(u));if(0!==e&&0!==r){if(null===t.querySelector(":scope > .metal")){const e=new Image;e.className="metal",t.append(e)}null===document.getElementById(`svg_for_filter_lustre_${m.replace(/ /g,"")}`)&&document.body.append(tag("svg",{props:{id:`svg_for_filter_lustre_${m.replace(/ /g,"")}`,width:0,height:0},inner:[tag("filter",{inner:[tag("feColorMatrix",{props:{"color-interpolation-filters":"sRGB",in:"SourceGraphic",type:"matrix",values:`${x[0]} 0 0 0 0 0 ${x[1]} 0 0 0 0 0 ${x[2]} 0 0 0 0 0 1 0`,result:"color"}}),tag("feBlend",{props:{"color-interpolation-filters":"sRGB",mode:"soft-light",in:"color",in2:"SourceGraphic"}})],props:{id:`lustre_${m.replace(/ /g,"")}`}})]})),rasterify(t,serializer.serializeToString(tag("svg",{props:{height:1024,width:1024,xmlns:xmlns},inner:[tag("radialGradient",{inner:[tag("stop",{props:{offset:"33%","stop-color":"#ffc0c0","stop-opacity":1}}),tag("stop",{props:{offset:"100%","stop-color":"#800000","stop-opacity":0}})],props:{id:"blot"}}),tag("rect",{props:{fill:"white",height:1024,width:1024}}),tag("g",{inner:[...Array.from({length:24}).map(((t,e)=>sheen({offset:Math.pow(3,e%2==0?e/4:(e-1)/4),radii:h,stroke:Math.ceil(e/2)%2==0?"red":"white",vertical:e%2==0,x:g,y:f}))).reverse(),tag("rect",{props:{fill:"url(#blot)",height:512,width:2048,y:256,x:-512}})],props:{transform:"scale(0.5) translate(512,512)"}})]})),(e=>rasterify(t,serializer.serializeToString(tag("svg",{inner:[tag("filter",{inner:[tag("feImage",{props:{"color-interpolation-filters":"sRGB",preserveAspectRatio:"none",height:1024,width:1024,href:e,result:"image"}}),tag("feGaussianBlur",{props:{"color-interpolation-filters":"sRGB",in:"image",result:"blur",stdDeviation:`${parseInt(l*(f/g)||0)},${parseInt(1.5*l*(g/f)||0)}`}}),tag("feDisplacementMap",{props:{"color-interpolation-filters":"sRGB",in:"SourceGraphic",in2:"blur",result:"displacement",scale:50+Math.abs(p)>100?100:50+Math.abs(p),xChannelSelector:"R",yChannelSelector:"G"}})],props:{filterUnits:"userSpaceOnUse",height:2048,id:"noise",width:2048,x:0,y:0}}),tag("linearGradient",{inner:[tag("stop",{props:{offset:"33%","stop-color":"#e0e0e0"}}),tag("stop",{props:{offset:"38%","stop-color":"#ffffff"}}),tag("stop",{props:{offset:"43%","stop-color":"#c0c0c0"}}),tag("stop",{props:{offset:"47%","stop-color":"#a0a0a0"}}),tag("stop",{props:{offset:"49%","stop-color":"#606060"}}),tag("stop",{props:{offset:"58%","stop-color":"#c0c0c0"}}),tag("stop",{props:{offset:"68%","stop-color":"#808080"}}),tag("stop",{props:{offset:"98%","stop-color":"#808080"}})],props:{id:"gradient",x1:w.x1,x2:w.x2,y1:w.y1,y2:w.y2}}),tag("radialGradient",{inner:[tag("stop",{props:{offset:"33%","stop-color":"black","stop-opacity":y?.25:0}}),tag("stop",{props:{offset:"67%","stop-color":"black","stop-opacity":.5}})],props:{id:"radial"}}),tag("g",{inner:base,props:{filter:"url(#noise)"}}),tag("rect",{props:{fill:"url(#radial)",height:1024,width:1024,x:0,y:0}})],props:{height:512,width:512,preserveAspectRatio:"none",style:`transform: scale(1, ${y?"-":""}1)`,viewBox:"256 256 512 512",xmlns:xmlns}}))))),t.style.boxShadow=y?"inset black 0px 1000px 0px":"inset black 0px 1000px 0px, #00000030 1px 2px 2px, #00000020 2px 4px 4px",t.style.color=""+(y||r>100&&"MetalliCSS"!==t.innerText?"black":"white"),t.style.textRendering="geometricPrecision",t.style.textShadow=y||r>100&&"MetalliCSS"!==t.innerText?"white .5px .5px 1px":"black -.5px -.5px 1px",t.style.transform="translateZ(0)",t.style.overflow="hidden",t.querySelector(":scope > .metal")&&((e=t.querySelector(":scope > .metal"))=>{e.style.filter="",setTimeout((()=>e.style.filter=`url("#lustre_${m.replace(/ /g,"")}") saturate(300%) brightness(1.0625) contrast(1.0625)`),0),e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.zIndex="-1",e.style.maxWidth="200%",e.style.maxHeight="200%",e.style.width="200%",e.style.height="200%",e.style.transformOrigin="top left",e.style.transform="scale(0.5)"})()}},traverse=()=>Array.from(document.querySelectorAll(".metallicss")).forEach(metallicss);"loading"!==document.readyState?traverse():document.addEventListener("DOMContentLoaded",traverse);export default metallicss;
