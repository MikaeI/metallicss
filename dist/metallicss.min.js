const serializer=new XMLSerializer,xmlns="http://www.w3.org/2000/svg",domUrl=window.URL||window.webkitURL||window,dims={height:2048,width:2048},sRGB={"color-interpolation-filters":"sRGB"},randomSeed=Math.floor(100*Math.random()),inner=[tag("rect",{props:{fill:"url(#n)",height:1200,width:2048}}),tag("rect",{props:{fill:"url(#s)",height:848,width:2048,y:1200}}),tag("rect",{props:{...dims,filter:"url(#perlin)"}})],gradients=[tag("radialGradient",{inner:[tag("stop",{props:{"stop-color":"#d8dfef",offset:0}}),tag("stop",{props:{"stop-color":"#808080",offset:1}})],props:{"color-interpolation":"sRGB",cx:.6,cy:1,id:"n"}}),tag("radialGradient",{inner:[tag("stop",{props:{"stop-color":"#585048",offset:0}}),tag("stop",{props:{"stop-color":"white",offset:1}})],props:{"color-interpolation":"sRGB",cx:.6,cy:0,id:"s"}})],map=tag("feImage",{props:{...dims,...sRGB,href:`data:image/svg+xml;charset=utf-8,${encodeURIComponent(serializer.serializeToString(tag("svg",{inner:[tag("linearGradient",{inner:[tag("stop",{props:{"stop-color":"#ff0000","stop-opacity":1,offset:0}}),tag("stop",{props:{"stop-color":"#ff0000","stop-opacity":0,offset:1}})],props:{"color-interpolation":"sRGB",id:"red",x1:0,x2:1,y1:0,y2:0}}),tag("linearGradient",{inner:[tag("stop",{props:{"stop-color":"#0000ff","stop-opacity":1,offset:0}}),tag("stop",{props:{"stop-color":"#0000ff","stop-opacity":0,offset:1}})],props:{"color-interpolation":"sRGB",id:"blue",x1:0,x2:0,y1:0,y2:1}}),tag("rect",{props:{fill:"black",height:"100%",width:"100%"}}),tag("rect",{props:{fill:"url(#red)",height:"100%",width:"100%"}}),tag("rect",{props:{fill:"url(#blue)",height:"100%",width:"100%",style:"mix-blend-mode: screen"}})],props:{...dims,xmlns:xmlns}})))}`,preserveAspectRatio:"none",result:"map"}});function tag(e,{inner:t,props:r}){const o=document.createElementNS("http://www.w3.org/2000/svg",e);return r&&Object.entries(r).forEach((e=>o.setAttribute(...e))),t?.forEach((e=>o.append(e))),o}export const metallicss=e=>{const{offsetHeight:t,offsetWidth:r}=e,{backgroundColor:o,borderRadius:s}=getComputedStyle(e),a=getComputedStyle(e).getPropertyValue("--convexity"),l=getComputedStyle(e).getPropertyValue("--seed")||randomSeed,i=getComputedStyle(e).getPropertyValue("--metal").replace(/ /g,""),p="0"===a||" 0"===a?0:a&&parseInt(a)||4,n=Math.abs(p),c=parseInt(s),d=p<0,g="gold"===i?"rgb(255, 248, 0)":"copper"===i?"rgb(255, 128, 0)":"silver"===i?"rgb(221, 231, 247)":"lead"===i?"rgb(55, 55, 64)":"rgba(0, 0, 0, 0)"===o?"rgb(128, 128, 128)":o,f=g.replace("rgb(","").replace(")","").replace(/ /g,"").split(",").map((e=>(parseInt(e)/256).toFixed(3))),m=e.querySelector(":scope > .metal")||new Image;let u,h,y=parseInt((t/2<c?t/r*1024:c*(2048/r))/4)-4*n,x=parseInt((r/2<c?r/t*1024:c*(2048/t))/4)-4*n;0!==r&&0!==t&&(y<0&&(y=0),x<0&&(x=0),u=new Image,u.onload=function(){const e=document.createElement("canvas"),o=e.getContext("2d",{alpha:!1});e.height=2*t>1024?1024:2*t,e.width=2*r>1024?1024:2*r,o.drawImage(this,0,0),domUrl.revokeObjectURL(h),m.src=e.toDataURL(),setTimeout((()=>{u.remove(),e.remove()}),1e3)},null===e.querySelector(":scope > .metal")&&(m.className="metal",e.append(m)),null===document.getElementById(`for_lustre_${g.replace(/ /g,"")}`)&&document.body.append(tag("svg",{inner:[tag("filter",{inner:[tag("feColorMatrix",{props:{...sRGB,result:"color",type:"matrix",values:`${f[0]} 0 0 0 0 0 ${f[1]} 0 0 0 0 0 ${f[2]} 0 0 0 0 0 1 0`}}),tag("feBlend",{props:{...sRGB,in:"SourceGraphic",in2:"color",mode:"overlay",result:"first"}}),tag("feBlend",{props:{...sRGB,in:"first",in2:"SourceGraphic",mode:"overlay",result:"second"}}),tag("feBlend",{props:{...sRGB,in:"second",in2:"SourceGraphic",mode:"overlay",result:"third"}})],props:{id:`lustre_${g.replace(/ /g,"")}`}})],props:{height:0,width:0,id:`for_lustre_${g.replace(/ /g,"")}`}})),h=domUrl.createObjectURL(new Blob([serializer.serializeToString(tag("svg",{inner:[...gradients,tag("filter",{inner:[map,tag("feImage",{props:{...dims,...sRGB,href:`data:image/svg+xml;charset=utf-8,${encodeURIComponent(serializer.serializeToString(tag("svg",{inner:[tag("filter",{inner:[tag("feGaussianBlur",{props:{...sRGB,stdDeviation:3*n}})],props:{id:"blur"}}),tag("rect",{props:{fill:"rgb(1, 0, 1)",filter:"url(#blur)",height:25-n/3*((r+t)/2/t)+"%",width:25-n/3*((r+t)/2/r)+"%",rx:y,ry:x,x:37.5+n/6*((r+t)/2/r)+"%",y:37.5+n/6*((r+t)/2/t)+"%"}})],props:{...dims,xmlns:xmlns}})))}`,preserveAspectRatio:"none",result:"lens"}}),tag("feBlend",{props:{...sRGB,in:"lens",in2:"map"}}),tag("feDisplacementMap",{props:{...sRGB,in:"SourceGraphic",scale:-500,xChannelSelector:"R",yChannelSelector:"B"}})],props:{id:"warp",x:0,y:0}}),tag("filter",{inner:[tag("feTurbulence",{props:{...sRGB,baseFrequency:"0.005 0.01",seed:l,type:"fractalNoise"}}),tag("feColorMatrix",{props:{...sRGB,result:"desaturated",type:"matrix",values:".33 .33 .33 0 0 .33 .33 .33 0 0 .33 .33 .33 0 0 0 0 0 1 0"}})],props:{id:"perlin"}}),tag("g",{inner:d?[...inner,tag("rect",{props:{...dims,fill:"#30303030"}})]:inner,props:{filter:"url(#warp)"}})],props:{height:2*t>1024?1024:2*t,width:2*r>1024?1024:2*r,preserveAspectRatio:"none",style:`transform: scale(1, ${d?"-":""}1)`,viewBox:"768 768 512 512",xmlns:xmlns}}))],{type:"image/svg+xml;charset=utf-8"})),u.src=h,e.style.boxShadow=d?"":"#00000030 1px 2px 2px, #00000020 2px 4px 4px",e.style.color="white",e.style.overflow="hidden",e.style.textRendering="geometricPrecision",e.style.transform="translateZ(0)",e.querySelector(":scope > .metal").style.filter="",setTimeout((()=>Object.assign(e.querySelector(":scope > .metal").style,{filter:`url("#lustre_${g.replace(/ /g,"")}")`,height:"100%",left:"0",maxWidth:"100%",position:"absolute",top:"0",width:"100%",zIndex:-1})),0))},traverse=()=>Array.from(document.querySelectorAll(".metallicss")).forEach(metallicss);"loading"!==document.readyState?traverse():document.addEventListener("DOMContentLoaded",traverse);export default metallicss;
