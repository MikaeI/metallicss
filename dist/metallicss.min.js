const base=[tag("rect",{props:{fill:"url(#gradient)",height:1024,width:1024,x:0,y:0}})],defs=tag("defs",{inner:[tag("linearGradient",{inner:[tag("stop",{props:{offset:"35%","stop-color":"#e0e0e0"}}),tag("stop",{props:{offset:"40%","stop-color":"#ffffff"}}),tag("stop",{props:{offset:"45%","stop-color":"#c0c0c0"}}),tag("stop",{props:{offset:"49%","stop-color":"#a0a0a0"}}),tag("stop",{props:{offset:"51%","stop-color":"#606060"}}),tag("stop",{props:{offset:"60%","stop-color":"#c0c0c0"}}),tag("stop",{props:{offset:"70%","stop-color":"#808080"}}),tag("stop",{props:{offset:"100%","stop-color":"#808080"}})],props:{id:"gradient",x1:0,x2:0,y1:0,y2:1}})]}),serializer=new XMLSerializer,xmlns="http://www.w3.org/2000/svg",domUrl=window.URL||window.webkitURL||window;function tag(e,{inner:t,props:r}){const o=document.createElementNS("http://www.w3.org/2000/svg",e);return r&&Object.entries(r).forEach((e=>o.setAttribute(...e))),t?.forEach((e=>o.append(e))),o}function sheen({offset:e,radii:{x:t,y:r},stroke:o,vertical:s,x:a,y:l}){const i=e/(s?a:l)/2,p=e/3/(s?a:l),n=1024-2*i+2*p;return tag("rect",{props:{"stroke-width":parseInt(p),fill:"none",height:parseInt(s?1024+p:n),rx:parseInt(t),ry:parseInt(r),stroke:o,width:parseInt(s?n:1024+p),x:parseInt(s?i-p:-p/2),y:parseInt(s?-p/2:i-p)}})}function rasterify(e,t,r){const o=domUrl.createObjectURL(new Blob([t],{type:"image/svg+xml;charset=utf-8"})),s=r?new Image:e.querySelector(":scope > .metal");r&&(s.onload=function(){const e=document.createElement("canvas"),t=e.getContext("2d",{alpha:!1});e.width=512,e.height=512,t.drawImage(this,0,0),domUrl.revokeObjectURL(o),s.remove(),r(e.toDataURL()),e.remove()}),s.src=o}export const metallicss=e=>{const{offsetWidth:t,offsetHeight:r}=e,{backgroundColor:o,borderRadius:s}=getComputedStyle(e),a=getComputedStyle(e).getPropertyValue("--convexity"),l=getComputedStyle(e).getPropertyValue("--scale")||4,i=getComputedStyle(e).getPropertyValue("--metal").replace(/ /g,""),p="0%"===a||" 0%"===a?0:a&&parseInt(a)||20,n=p*((r>t?t:r)/640),c=Math.abs(n),g=t/(16*l*(c/10+1)),f=r/(16*l*(c/10+1)),d=parseInt(s),h={x:r/2<d?f/g*512:d*(1024/t),y:t/2<d?g/f*512:d*(1024/r)},m=n<0,u="gold"===i?"rgb(255, 215, 128)":"copper"===i?"rgb(187, 128, 119)":"silver"===i?"rgb(221, 231, 247)":"lead"===i?"rgb(55, 55, 64)":"rgba(0, 0, 0, 0)"===o?"rgb(128, 128, 128)":o,y=u.replace("rgb(","").replace(")","").replace(/ /g,"").split(",").map((e=>(parseInt(e)/256).toFixed(3)));if(0!==t&&0!==r){if(null===e.querySelector(":scope > .metal")){const t=new Image;t.className="metal",e.append(t)}null===document.getElementById(`svg_for_filter_lustre_${u.replace(/ /g,"")}`)&&document.body.append(tag("svg",{props:{id:`svg_for_filter_lustre_${u.replace(/ /g,"")}`,width:0,height:0},inner:[tag("filter",{inner:[tag("feColorMatrix",{props:{"color-interpolation-filters":"sRGB",in:"SourceGraphic",type:"matrix",values:`${y[0]} 0 0 0 0 0 ${y[1]} 0 0 0 0 0 ${y[2]} 0 0 0 0 0 1 0`,result:"color"}}),tag("feBlend",{props:{"color-interpolation-filters":"sRGB",mode:"soft-light",in:"color",in2:"SourceGraphic"}})],props:{id:`lustre_${u.replace(/ /g,"")}`}})]})),rasterify(e,serializer.serializeToString(tag("svg",{props:{height:512,width:512,xmlns:xmlns},inner:[tag("rect",{props:{fill:"white",height:512,width:512}}),tag("g",{inner:Array.from({length:24}).map(((e,t)=>sheen({offset:Math.pow(3,t%2==0?t/4:(t-1)/4),radii:h,stroke:Math.ceil(t/2)%2==0?"red":"white",vertical:t%2==0,x:g,y:f}))).reverse(),props:{transform:"scale(0.25) translate(512,512)"}})]})),(t=>rasterify(e,serializer.serializeToString(tag("svg",{inner:[tag("filter",{inner:[tag("feImage",{props:{"color-interpolation-filters":"sRGB",preserveAspectRatio:"none",height:1024,width:1024,href:t,result:"image"}}),tag("feGaussianBlur",{props:{"color-interpolation-filters":"sRGB",in:"image",result:"blur",stdDeviation:`${parseInt(l*(f/g)||0)},${parseInt(1.5*l*(g/f)||0)}`}}),tag("feDisplacementMap",{props:{"color-interpolation-filters":"sRGB",in:"SourceGraphic",in2:"blur",result:"displacement",scale:50+Math.abs(p)>100?100:50+Math.abs(p),xChannelSelector:"R",yChannelSelector:"G"}})],props:{filterUnits:"userSpaceOnUse",height:2048,id:"noise",width:2048,x:0,y:0}}),defs,tag("radialGradient",{inner:[tag("stop",{props:{offset:"33%","stop-color":"black","stop-opacity":m?.25:0}}),tag("stop",{props:{offset:"67%","stop-color":"black","stop-opacity":.5}})],props:{id:"radial"}}),tag("g",{inner:base,props:{filter:"url(#noise)"}}),tag("rect",{props:{fill:"url(#radial)",height:1024,width:1024,x:0,y:0}})],props:{height:512,width:512,preserveAspectRatio:"none",style:`transform: scale(1, ${m?"-":""}1)`,viewBox:"256 256 512 512",xmlns:xmlns}}))))),e.style.boxShadow=m?"inset black 0px 1000px 0px":"inset black 0px 1000px 0px, #00000030 1px 2px 2px, #00000020 2px 4px 4px",e.style.color=""+(m||r>100&&"MetalliCSS"!==e.innerText?"black":"white"),e.style.textRendering="geometricPrecision",e.style.textShadow=m||r>100&&"MetalliCSS"!==e.innerText?"white .5px .5px 1px":"black -.5px -.5px 1px",e.style.transform="translateZ(0)",e.style.overflow="hidden",e.querySelector(":scope > .metal")&&((t=e.querySelector(":scope > .metal"))=>{t.style.filter=`url("#lustre_${u.replace(/ /g,"")}") saturate(300%)`,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.zIndex="-1",t.style.maxWidth="200%",t.style.maxHeight="200%",t.style.width="200%",t.style.height="200%",t.style.transformOrigin="top left",t.style.transform="scale(0.5)"})()}},traverse=()=>Array.from(document.querySelectorAll(".metallicss")).forEach(metallicss);"loading"!==document.readyState?traverse():document.addEventListener("DOMContentLoaded",traverse);export default metallicss;
